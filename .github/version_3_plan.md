# Snake Game - Version 3 계획서

## 목표
Version 2의 기능에 고급 게임플레이 요소, 다양한 게임 모드, 메뉴 시스템을 추가하여 완성도 높은 게임을 만듭니다.

## Version 2에서 추가/개선되는 기능

### 1. 메뉴 시스템
- **메인 메뉴**:
  - 게임 시작
  - 난이도 선택
  - 게임 모드 선택
  - 설정
  - 최고 점수 보기
  - 종료
- **설정 메뉴**:
  - 사운드 ON/OFF
  - 음악 볼륨 조절
  - 그리드 표시 ON/OFF
  - 키 설정 (방향키 또는 WASD)

### 2. 난이도 시스템
- **Easy (쉬움)**:
  - 초기 속도: 8 FPS
  - 속도 증가: 느림 (10개마다 +1)
  - 장애물: 없음
- **Normal (보통)**:
  - 초기 속도: 10 FPS
  - 속도 증가: 보통 (5개마다 +1)
  - 장애물: 없음
- **Hard (어려움)**:
  - 초기 속도: 12 FPS
  - 속도 증가: 빠름 (3개마다 +1)
  - 장애물: 5개 랜덤 배치
- **Expert (전문가)**:
  - 초기 속도: 15 FPS
  - 속도 증가: 매우 빠름 (2개마다 +1)
  - 장애물: 10개 랜덤 배치
  - 특수 먹이 등장

### 3. 게임 모드
- **Classic Mode (클래식)**:
  - 기본 스네이크 게임
  - 무한 플레이
  
- **Time Attack Mode (시간 제한)**:
  - 60초 제한 시간
  - 제한 시간 내 최대한 많은 점수 획득
  - 특수 먹이로 시간 연장 (+5초)
  
- **Survival Mode (생존)**:
  - 시간이 지날수록 장애물이 추가됨
  - 10초마다 새로운 장애물 1개 추가
  - 최대한 오래 생존
  
- **Portal Mode (포탈)**:
  - 벽에 부딪히면 반대편으로 이동 (Pac-Man 스타일)
  - 자기 몸통 충돌만 게임 오버

### 4. 고급 게임 요소
- **장애물 (Obstacles)**:
  - 회색 블록으로 표시
  - 부딪히면 게임 오버
  - 난이도/모드에 따라 개수 조절
  
- **특수 먹이 (Special Food)**:
  - **Golden Apple (금 사과)**: +50점, 5% 확률
  - **Speed Boost (속도 향상)**: 5초간 2배 속도, 파란색
  - **Slow Motion (슬로우)**: 5초간 속도 감소, 보라색
  - **Time Bonus (시간)**: Time Attack 모드에서 +5초
  
- **파워업 시스템**:
  - 무적 (5초간 충돌 무시)
  - 유령 모드 (벽 통과 가능)
  - 자석 (근처 먹이 자동 흡수)

### 5. 통계 및 업적 시스템
- **게임 통계**:
  - 총 플레이 시간
  - 총 플레이 횟수
  - 먹은 먹이 총 개수
  - 난이도별 최고 점수
  - 모드별 최고 점수
  
- **업적 (Achievements)**:
  - "First Bite": 첫 먹이 먹기
  - "Growing Up": 길이 10 달성
  - "Snake Master": 길이 50 달성
  - "Speed Demon": 최고 속도 도달
  - "Survivor": Survival 모드 5분 생존
  - "Time Master": Time Attack 100점 달성
  - "Perfectionist": 한 번도 안 죽고 먹이 20개

### 6. 그래픽 및 애니메이션 개선
- **뱀 애니메이션**:
  - 부드러운 이동 애니메이션
  - 머리 방향에 따른 스프라이트
  - 몸통 굴곡 표현
  
- **효과 (Effects)**:
  - 먹이 먹을 때 파티클 효과
  - 파워업 활성화 시 빛나는 효과
  - 게임 오버 시 폭발 애니메이션
  
- **배경**:
  - 테마별 배경 (숲, 사막, 우주 등)
  - 미세한 애니메이션 (별 반짝임 등)

### 7. 리더보드
- **온라인 리더보드** (선택적):
  - 전 세계 플레이어 순위
  - 친구와 점수 비교
  
- **로컬 리더보드**:
  - 상위 10개 기록 저장
  - 플레이어 이름 입력
  - 난이도/모드별 분류

## 기술 스택
- **언어**: Python 3.8+
- **라이브러리**: 
  - pygame 2.0+
  - json (데이터 저장)
  - sqlite3 (통계 및 업적 저장)
  - requests (온라인 기능, 선택적)

## 파일 구조 (추가/수정)
```
snake/
├── main.py                  # 게임 실행 파일
├── config.py                # 설정 관리 (새로 추가)
├── constants.py             # 상수 정의
│
├── core/                    # 핵심 게임 로직
│   ├── __init__.py
│   ├── snake.py             # Snake 클래스
│   ├── food.py              # Food 클래스 (확장)
│   ├── obstacle.py          # Obstacle 클래스 (새로 추가)
│   ├── powerup.py           # PowerUp 클래스 (새로 추가)
│   └── game.py              # Game 로직 관리
│
├── ui/                      # UI 관련
│   ├── __init__.py
│   ├── menu.py              # 메뉴 시스템 (새로 추가)
│   ├── hud.py               # 게임 정보 표시
│   └── effects.py           # 시각 효과 (새로 추가)
│
├── managers/                # 각종 관리자
│   ├── __init__.py
│   ├── score_manager.py     # 점수 관리
│   ├── achievement_manager.py  # 업적 관리 (새로 추가)
│   ├── stats_manager.py     # 통계 관리 (새로 추가)
│   └── sound_manager.py     # 사운드 관리 (새로 추가)
│
├── modes/                   # 게임 모드
│   ├── __init__.py
│   ├── classic_mode.py      # 클래식 모드 (새로 추가)
│   ├── time_attack_mode.py  # 시간 제한 모드 (새로 추가)
│   ├── survival_mode.py     # 생존 모드 (새로 추가)
│   └── portal_mode.py       # 포탈 모드 (새로 추가)
│
├── data/                    # 데이터 파일
│   ├── highscores.json      # 최고 점수
│   ├── config.json          # 설정
│   ├── stats.db             # 통계 (SQLite)
│   └── achievements.json    # 업적
│
└── assets/                  # 리소스
    ├── sounds/              # 사운드 효과
    │   ├── eat.wav
    │   ├── gameover.wav
    │   └── powerup.wav
    ├── music/               # 배경 음악
    │   └── background.mp3
    └── images/              # 이미지 (선택적)
        └── backgrounds/
```

## 구현 순서
1. 프로젝트 구조 리팩토링 (모듈화)
2. 메뉴 시스템 구현
3. 난이도 시스템 구현
4. 장애물 클래스 구현
5. 게임 모드별 클래스 구현
6. 특수 먹이 및 파워업 구현
7. 통계 및 업적 시스템 구현
8. 그래픽 효과 및 애니메이션 추가
9. 사운드 관리자 및 효과음 추가
10. 리더보드 시스템 구현

## 테스트 계획

### 1. 단위 테스트 (Unit Test)
- **Obstacle 클래스**
  - [ ] 랜덤 위치 생성 (뱀/먹이와 겹치지 않음)
  - [ ] 충돌 감지
  
- **PowerUp 클래스**
  - [ ] 각 파워업 효과 정확성
  - [ ] 지속 시간 관리
  - [ ] 확률적 생성
  
- **AchievementManager**
  - [ ] 업적 조건 확인
  - [ ] 업적 잠금 해제
  - [ ] 데이터 저장/로드
  
- **StatsManager**
  - [ ] 통계 추적 정확성
  - [ ] 데이터베이스 CRUD 작업

### 2. 통합 테스트 (Integration Test)
- [ ] 메뉴에서 게임 시작까지 흐름
- [ ] 난이도 변경이 게임에 반영됨
- [ ] 각 게임 모드가 정상 작동
- [ ] 장애물 충돌 시 게임 오버
- [ ] 특수 먹이 효과 적용
- [ ] 파워업 획득 및 효과 적용
- [ ] 업적 잠금 해제 알림
- [ ] 통계 데이터 누적

### 3. 모드별 테스트
- **Classic Mode**
  - [ ] 무한 플레이 가능
  - [ ] 점수 정상 계산
  
- **Time Attack Mode**
  - [ ] 타이머 정확성
  - [ ] 시간 종료 시 게임 오버
  - [ ] 시간 보너스 아이템 작동
  
- **Survival Mode**
  - [ ] 장애물 점진적 추가
  - [ ] 생존 시간 기록
  
- **Portal Mode**
  - [ ] 벽 통과 후 반대편 출현
  - [ ] 자기 몸통 충돌만 게임 오버

### 4. 난이도별 테스트
- [ ] 각 난이도에서 초기 속도 확인
- [ ] 속도 증가율 확인
- [ ] 장애물 개수 확인
- [ ] 특수 먹이 출현 빈도

### 5. UI/UX 테스트
- [ ] 메뉴 내비게이션이 직관적인지
- [ ] 모든 버튼이 작동하는지
- [ ] 설정 변경이 즉시 반영되는지
- [ ] 리더보드 표시가 정확한지
- [ ] 업적 알림이 잘 보이는지
- [ ] 효과 애니메이션이 부드러운지

### 6. 성능 테스트
- [ ] 파티클 효과로 인한 프레임 드롭 없음
- [ ] 많은 장애물이 있어도 부드러운 동작
- [ ] 데이터베이스 작업이 게임 플레이 방해 안 함
- [ ] 메모리 누수 없음 (장시간 플레이)

### 7. 데이터 무결성 테스트
- [ ] 설정 파일 손상 시 기본값 로드
- [ ] 데이터베이스 손상 시 복구 또는 재생성
- [ ] 업적 데이터 손실 방지
- [ ] 리더보드 데이터 정합성

### 8. 크로스 플랫폼 테스트 (선택적)
- [ ] Windows에서 정상 작동
- [ ] macOS에서 정상 작동
- [ ] Linux에서 정상 작동

### 9. 사용자 시나리오 테스트
- **신규 플레이어**
  - [ ] 메뉴가 이해하기 쉬운지
  - [ ] 튜토리얼이 필요한지 판단
  
- **숙련 플레이어**
  - [ ] 고급 기능에 쉽게 접근 가능한지
  - [ ] 도전적인 난이도 제공
  
- **캐주얼 플레이어**
  - [ ] 쉬운 난이도에서 즐길 수 있는지
  - [ ] 빠른 게임 시작 가능

### 10. 회귀 테스트
- [ ] Version 1의 모든 기능 정상 작동
- [ ] Version 2의 모든 기능 정상 작동
- [ ] 새 기능이 기존 기능에 영향 없음

## 성공 기준
- Version 2의 모든 기능 유지 및 개선
- 4가지 게임 모드가 모두 안정적으로 작동
- 메뉴 시스템이 직관적이고 사용하기 쉬움
- 통계 및 업적이 정확하게 추적됨
- 그래픽 효과가 게임 경험을 향상시킴
- 다양한 난이도로 모든 수준의 플레이어가 즐길 수 있음
- 모든 테스트 케이스 통과 (90% 이상)
- 버그 없이 30분 이상 연속 플레이 가능

## 추가 고려사항

### 성능 최적화
- 렌더링 최적화 (더티 사각형 기법)
- 이벤트 처리 최적화
- 데이터 저장 비동기 처리

### 접근성
- 색맹 모드 (색상 조정)
- 키보드 단축키 안내
- 명확한 시각적 피드백

### 확장 가능성
- 스킨 시스템 (뱀 외형 변경)
- 맵 에디터 (사용자 정의 맵)
- 멀티플레이어 지원 기반

## 예상 소요 시간
- 구조 리팩토링: 4-6시간
- 메뉴 시스템: 4-5시간
- 게임 모드 구현: 8-10시간
- 고급 게임 요소: 6-8시간
- 통계/업적 시스템: 4-5시간
- 그래픽 효과: 5-7시간
- 테스트 및 디버깅: 8-10시간
- UI/UX 개선 및 최적화: 4-6시간
- **총 예상 시간**: 43-57시간

## 릴리스 계획
1. **Alpha**: 핵심 기능 구현 완료
2. **Beta**: 모든 기능 구현, 초기 테스트 완료
3. **RC (Release Candidate)**: 모든 테스트 통과, 버그 수정 완료
4. **v1.0 Release**: 안정화 및 문서화 완료

## 향후 개선 방향 (v4+)
- 온라인 멀티플레이어
- 모바일 버전 (Pygame Subset for Android)
- AI 대전 모드
- 커스텀 스킨 마켓플레이스
- 클라우드 세이브
